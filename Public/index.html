<html>

<head>
    <link rel="apple-touch-icon" href="assets/icon.png">
    <link rel="shortcut icon" type="image/jpg" href="assets/icon.png" />
    <title>Boringly</title>
    <link href="assets/splashscreens/iphone5_splash.png"
        media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/iphone6_splash.png"
        media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/iphoneplus_splash.png"
        media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/iphonex_splash.png"
        media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/iphonexr_splash.png"
        media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/iphonexsmax_splash.png"
        media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/ipad_splash.png"
        media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/ipadpro1_splash.png"
        media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/ipadpro3_splash.png"
        media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)"
        rel="apple-touch-startup-image" />
    <link href="assets/splashscreens/ipadpro2_splash.png"
        media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)"
        rel="apple-touch-startup-image" />

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Boringly">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="HandheldFriendly" content="true" />
    <meta http-equiv="ScreenOrientation" content="autoRotate:disabled">


    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/addtohomescreen.css">

    <script type="text/javascript" src="scripts/addtohomescreen.js"></script>
    <script type="text/javascript" src="scripts/p5.min.js"></script>
    <script type="text/javascript" src="scripts/draggable.js"></script>
    <script type="text/javascript" src="scripts/toggles.js"></script>
    <script type="text/javascript" src="scripts/script.js"></script>

</head>

<body>
    <script>
        window.onload = async function () {
            // Registering Service Worker
            if ('serviceWorker' in navigator) {
                registerValidSW('sw.js');
            }
            await analytics();
        }
        async function analytics() {
            let http = new XMLHttpRequest();
            let url = '/count';
            function text(url) { return fetch(url).then(res => res.text()); }
            let an = await text('https://www.cloudflare.com/cdn-cgi/trace').then(data => {
                return data.match(/[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}/)[0];
            });
            http.open('POST', url, true);
            http.setRequestHeader('Content-type', 'application/json');
            http.setRequestHeader('user', an)
            http.send();
        }
        function registerValidSW(swUrl) {
            console.debug('Registering serviceWorker URL [' + swUrl + ']');
            navigator.serviceWorker
                .register(swUrl)
                .then(registration => {
                    registration.onupdatefound = () => {
                        const installingWorker = registration.installing;
                        installingWorker.onstatechange = () => {
                            if (installingWorker.state === 'installed') {
                                if (navigator.serviceWorker.controller) {
                                    // At this point, the old content will have been purged and
                                    // the fresh content will have been added to the cache.
                                    // It's the perfect time to display a "New content is
                                    // available; please refresh." message in your web app.
                                    reportInfo('App has been updated. This page will refresh in 5 seconds.');
                                    setInterval(() => window.location.reload(), 5000);
                                } else {
                                    // At this point, everything has been precached.
                                    // It's the perfect time to display a
                                    // "Content is cached for offline use." message.
                                    reportInfo('App is cached for offline use.');
                                }
                            }
                        };
                    };
                })
                .catch(error => {
                    reportError('Error during service worker registration:', error);
                });
        }
    </script>

</body>

</html>